<div class="container mt-4">
  <!-- Affichage apr√®s soumission -->
  <div *ngIf="submitted" class="submitted-data">
    <h2 class="text-success">‚úÖ Formulaire soumis avec succ√®s !</h2>
    
    <div class="card mt-3">
      <div class="card-header">
        <h3>Informations de l'√©tudiant</h3>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-sm-3"><strong>Nom:</strong></div>
          <div class="col-sm-9">{{ model.name }}</div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-3"><strong>Pr√©nom:</strong></div>
          <div class="col-sm-9">{{ model.Surname || 'Non renseign√©' }}</div>
        </div>
        <div class="row mb-2">
          <div class="col-sm-3"><strong>Classe:</strong></div>
          <div class="col-sm-9">{{ model.classe }}</div>
        </div>
        <div class="row">
          <div class="col-sm-3"><strong>ID:</strong></div>
          <div class="col-sm-9">{{ model.id }}</div>
        </div>
      </div>
    </div>

    <button class="btn btn-primary mt-3" (click)="newEtudiant()">
      ‚úèÔ∏è Modifier les informations
    </button>
  </div>

  <!-- Formulaire principal -->
  <div *ngIf="!submitted">
    <h1 class="mb-4">üìù Formulaire √âtudiant</h1>
    
    <!-- Debug - √† supprimer plus tard -->
    <div class="alert alert-info mb-3">
      <strong>Debug:</strong> {{ diagnostic }}
    </div>

    <form (ngSubmit)="onSubmit()" #etudiantForm="ngForm">
      
      <!-- Champ Nom -->
      <div class="form-group">
        <label for="name" class="form-label">
          <strong>Nom *</strong>
        </label>
        <input 
          type="text" 
          class="form-control" 
          id="name"
          required
          [(ngModel)]="model.name" 
          name="name"
          #name="ngModel"
          [class.is-invalid]="name.invalid && name.touched"
          [class.is-valid]="name.valid && name.touched">
        
        <!-- Message d'erreur -->
        <div *ngIf="name.invalid && name.touched" class="invalid-feedback">
          ‚ùå Le nom est obligatoire
        </div>
      </div>

      <!-- Champ Pr√©nom -->
      <div class="form-group mt-3">
        <label for="Surname" class="form-label">
          <strong>Pr√©nom</strong> <small class="text-muted">(optionnel)</small>
        </label>
        <input 
          type="text" 
          class="form-control" 
          id="Surname"
          [(ngModel)]="model.Surname" 
          name="Surname"
          #Surname="ngModel">
      </div>

      <!-- S√©lection de la classe -->
      <div class="form-group mt-3">
        <label for="classe" class="form-label">
          <strong>Classe √âtudiant *</strong>
        </label>
        <select 
          class="form-control" 
          id="classe"
          required
          [(ngModel)]="model.classe" 
          name="classe"
          #classe="ngModel"
          [class.is-invalid]="classe.invalid && classe.touched"
          [class.is-valid]="classe.valid && classe.touched">
          <option *ngFor="let cls of classes" [value]="cls">{{ cls }}</option>
        </select>
        
        <!-- Message d'erreur -->
        <div *ngIf="classe.invalid && classe.touched" class="invalid-feedback">
          ‚ùå La classe est obligatoire
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="mt-4">
        <button 
          type="submit" 
          class="btn btn-success me-2"
          [disabled]="!etudiantForm.form.valid">
          ‚úÖ Soumettre
        </button>
        
        <button 
          type="button" 
          class="btn btn-outline-secondary"
          (click)="newEtudiant()">
          üÜï Nouvel √âtudiant
        </button>
      </div>

      <!-- Indicateur de validation -->
      <div class="mt-3">
        <small class="text-muted">
          Statut du formulaire: 
          <span [class.text-success]="etudiantForm.form.valid" 
                [class.text-danger]="!etudiantForm.form.valid">
            {{ etudiantForm.form.valid ? 'VALIDE' : 'INVALIDE' }}
          </span>
        </small>
      </div>
    </form>
  </div>
</div>